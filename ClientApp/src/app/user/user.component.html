<div *ngIf="!isUserAuthenticated">
    <app-sign-in></app-sign-in>
</div>

<div class="mx-auto px-6" *ngIf="isUserAuthenticated && profileForm">
    <!-- User Information Card -->
    <div class="flex flex-row justify-end">
        <button (click)="cancelEdit()"
                *ngIf="isEditing"
                class="absolute text-slate-100 active:bg-fuchsia-600 bg-red-700 rounded-lg text-sm w-6 h-6 ml-auto m-1.5 inline-flex justify-center items-center"
                type="button">
            <svg aria-hidden="true" class="w-3 h-3" fill="none" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg">
                <path d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6" stroke="currentColor" stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"/>
            </svg>
            <span class="sr-only">Close modal</span>
        </button>
    </div>
    <div class="bg-slate-900 rounded-lg p-8 w-full mx-auto">
        <form [formGroup]="profileForm">
        <div class="flex flex-row justify-end">
        </div>
        <!-- Nested User Card -->
        <div class="flex flex-col rounded-lg bg-slate-800 mb-6">
            <div class="flex flex-row items-center justify-center gap-4 py-8">

                <div class="flex justify-center">
                    <div *ngIf="isEditing" class="mt-1">
                        <button (click)="changeImage()"
                                class="absolute px-2 py-2 bg-slate-900 text-white rounded-lg">
                            <img alt="Upload icon" class="w-6 h-6" src="/assets/assets/edit.svg">
                        </button>
                        <input #imageInput
                               (change)="onImageChange($event)"
                               class="hidden"
                               type="file">
                    </div>
                    <img alt="Profile picture"
                         class="rounded-full w-32 h-32 object-cover border-3 border-slate-300"
                         src="https://demos.creative-tim.com/argon-dashboard/assets-old/img/theme/team-4.jpg">
                </div>
                <div class="mt-6 text-center flex flex-col gap-2 w-1/4">
                    <div class="bg-slate-50 bg-opacity-60 text-center rounded-xl">
                        <span class="text-[24px] font-medium border-0 text-slate-900">{{profile?.firstName}} {{profile?.lastName}}</span>
                    </div>
                    <span
                            class="text-[18px] py-0.5 font-medium bg-slate-100 bg-opacity-40 border-0 text-slate-900 text-center rounded-xl cursor-not-allowed"
                            disabled aria-describedby="emailHelp"
                    > {{profile?.email}}
                    </span>
                </div>
            </div>
            <div class="px-1 ">
                <small id="emailHelp" class="text-white w-full text-muted">We'll never share your email with anyone
                    else.</small>
            </div>
        </div>
        <!-- User Information Details -->
        <div class="flex flex-wrap -mx-3">
            <div class="w-full md:w-1/2 px-3 mb-6">
                <label class="text-gray-400">First Name</label>
                <input
                        [disabled]="!isEditing"
                        class="form_input text-sm"
                        placeholder="Enter your first name..."
                        required
                        type="text"
                        formControlName="firstName"
                >
            </div>
            <div class="w-full md:w-1/2 px-3 mb-6">
                <label class="text-gray-400">Last Name</label>
                <input
                        [disabled]="!isEditing"
                        class="form_input text-sm"
                        placeholder="Enter your last name..."
                        type="text"
                        formControlName="lastName"
                        required>
            </div>
            <div class="w-full md:w-1/2 px-3 mb-6">
                <label class="text-gray-400">Hire Date</label>
                <input
                        class="form_input text-sm text-muted"
                        type="date"
                        formControlName="createdDate"
                >
            </div>
            <div class="w-full md:w-1/2 px-3 mb-6">
                <label class="text-gray-400">Supermarket Name</label>
                <input
                        class="form_input text-sm text-muted"
                        placeholder="Supermarket Name"
                        type="text"
                        formControlName="supermarketName"
                >
            </div>
            <button
                    (click)="isEditing ? saveProfile() : toggleEdit()"
                    [ngClass]="{
        'bg-gradient-to-r': true,
        'from-purple-main': !isEditing,
        'to-fuchsia-600': !isEditing,
        'bg-purple-main': isEditing,
        'active:bg-fuchsia-600': isEditing
        }"
                    class="w-full mx-3 text-white text-base-medium shadow-md rounded-lg py-2"
                    type="button">{{ isEditing ? 'Save' : 'Edit' }}
            </button>


        </div>
        </form>
    </div>
</div>
